import{_ as S,o as l,e as h,g as t,f as s,t as c,p as A,m as C,h as v,w as r,T as y,l as L,v as T,K as w,i as D,k as b,F as x,A as f,j as I}from"./index.f39f917a.js";import{E,a as q,b as N}from"./el-image-viewer.041a35b8.js";const $={data(){return{}},computed:{author(){return this.$store.state.author}}},z=e=>(A("data-v-ce9d6af4"),e=e(),C(),e),O={class:"authorStyle"},U={class:"author"},F={class:"author-name"},M={style:{"font-size":"90%",color:"#858585"}},j=z(()=>t("div",null,[t("span",{class:"tag1"},"\u6587\u7AE0"),t("span",{class:"tag1"},"\u5206\u7C7B"),t("span",{class:"tag1"},"\u8BBF\u95EE")],-1)),J={class:"tag",style:{color:"#6300ff"}},K={class:"tag",style:{color:"#6300ff"}},G={class:"tag",style:{color:"#6300ff"}},Q=z(()=>t("div",{class:"category"}," \u6587\u7AE0\u5206\u7C7B ",-1));function W(e,n,a,_,o,i){const u=E;return l(),h("div",O,[t("div",U,[s(u,{class:"img",fit:"cover",src:i.author.img,alt:""},null,8,["src"]),t("p",F,c(i.author.blogName),1),t("p",M,c(i.author.blogInfo),1),j,t("div",null,[t("span",J,c(i.author.articleNum),1),t("span",K,c(i.author.categoryNum),1),t("span",G,c(i.author.visitNum),1)])]),Q])}const B=S($,[["render",W],["__scopeId","data-v-ce9d6af4"]]);const X={components:{},props:{article:{id:Number,title:String,createTime:String,category:String,tag:String,digest:String,url:String,img:String}},data(){return{ok:!1}},methods:{articleDeail(){this.$router.push({path:"/ArticleDetail/"+this.article.id})}},computed:{},watch:{},mounted(){this.article.img={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}.VITE_BASE_URL+this.article.img,this.article.tag=JSON.parse(this.article.tag),this.article.digest=this.article.digest.replace(/#*.*#/g,"").replace(/[^a-z0-9\u4e00-\u9fa5]/,"").substring(0,200),this.ok=!0}},P=e=>(A("data-v-25051fba"),e=e(),C(),e),Y={class:"timebar"},Z={class:"time_line"},tt=P(()=>t("div",{class:"time_node"},null,-1)),et={class:"time_info"},at={class:"article_card"},st={style:{"font-size":"80%"}},ot={style:{color:"#d63a3a"}},it=P(()=>t("hr",{width:"400px",align:"left"},null,-1));function ct(e,n,a,_,o,i){const u=q,d=E,g=N;return l(),v(y,{name:"el-zoom-in-top"},{default:r(()=>[s(g,null,{default:r(()=>[s(u,{class:"timebarCol"},{default:r(()=>[t("div",Y,[t("div",Z,[tt,t("div",et,c(a.article.createTime),1)])])]),_:1}),s(u,{class:"articleCol"},{default:r(()=>[s(y,{name:"el-zoom-in-top"},{default:r(()=>[L(t("div",at,[t("div",{class:w({illustration_l:a.article.id%2==0,illustration_r:a.article.id%2!=0})},[s(d,{class:"img",fir:"cover",src:a.article.img,alt:"img",onClick:i.articleDeail},null,8,["src","onClick"])],2),t("div",{class:w({content_r:a.article.id%2==0,content_l:a.article.id%2!=0})},[t("h3",{onClick:n[0]||(n[0]=(...m)=>i.articleDeail&&i.articleDeail(...m))},c(a.article.title),1),t("span",st,[D(" \u5206\u7C7B: "),t("span",ot,c(a.article.category),1),D(" | \u6807\u7B7E: "),(l(!0),h(x,null,b(a.article.tag.tags,(m,p)=>(l(),h("span",{style:{color:"#d63a3a"},key:p},c(m)+"\xA0 ",1))),128))]),it,t("p",null,c(a.article.digest),1)],2)],512),[[T,o.ok]])]),_:1})]),_:1})]),_:1})]),_:1})}const V=S(X,[["render",ct],["__scopeId","data-v-25051fba"]]);const k={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}.VITE_BASE_URL,lt={name:"Home",props:["authorId"],components:{vArticleCard:V,vAuthorCard:B},data(){return{endmsg:"\u4E0B\u62C9\u52A0\u8F7D\u66F4\u591A",articleList:[],show:!1,ok:0,timeout:null,queryData:{authorId:"",startPage:0,pageSize:5},coverImg:""}},methods:{handleScroll(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{let e=document.documentElement.scrollTop,n=document.documentElement.clientHeight,a=document.documentElement.scrollHeight;n+e-a>-10&&(this.endmsg="\u6B63\u5728\u52A0\u8F7D...",f.get("init/getArticles",this.queryData).then(_=>{_.code==200&&(_.data.forEach(o=>{this.articleList.push(o)}),_.data.length<this.queryData.pageSize&&(this.endmsg="\u6CA1\u6709\u66F4\u591A\u4E86...",window.removeEventListener("scroll",this.handleScroll)),this.queryData.startPage=this.queryData.startPage+5)}))},100)}},computed:{isLogin:{set(e){this.$store.state.isLogin=e},get(){return this.$store.state.isLogin}}},watch:{},mounted(){window.addEventListener("scroll",this.handleScroll),f.get("init/getAuthor",{authorId:this.authorId}).then(e=>{e.code==200&&(e.data.img=k+e.data.img,this.coverImg=k+e.data.coverImg,this.$store.commit("setAuthorInfo",e.data),this.ok++)}),this.queryData.authorId=this.authorId,f.get("init/getArticles",this.queryData).then(e=>{e.code==200&&(e.data.forEach(n=>{this.articleList.push(n)}),e.data.length<this.queryData.pageSize&&(this.endmsg="\u6CA1\u6709\u66F4\u591A\u4E86...",window.removeEventListener("scroll",this.handleScroll)),this.ok++,this.queryData.startPage=this.queryData.startPage+5)}),setTimeout(()=>{this.show=!0},200)},unmounted(){window.removeEventListener("scroll",this.handleScroll)}},rt={class:"home-page"},nt={class:"endmsg"};function dt(e,n,a,_,o,i){const u=E,d=q,g=V,m=B,p=N;return l(),h("div",null,[t("div",rt,[s(y,{name:"el-fade-in"},{default:r(()=>[L(s(u,{class:"img",fit:"cover",src:o.coverImg},null,8,["src"]),[[T,o.show]])]),_:1})]),o.ok>1?(l(),v(p,{key:0},{default:r(()=>[s(d,{class:"space"}),s(d,{class:"ArticleCard"},{default:r(()=>[(l(!0),h(x,null,b(o.articleList,(H,R)=>(l(),h("div",{key:R,style:{transition:"all 0.5s"}},[s(g,{article:H},null,8,["article"])]))),128))]),_:1}),s(d,{class:"space"}),s(d,{class:"AuthorCard"},{default:r(()=>[o.ok>1?(l(),v(m,{key:0})):I("",!0)]),_:1}),s(d,{class:"space"})]),_:1})):I("",!0),t("div",nt,c(o.endmsg),1)])}const ht=S(lt,[["render",dt],["__scopeId","data-v-1a16eca5"]]);export{ht as default};
