import{_ as V,A as d}from"./index.7f3d917a.js";import"vue";const p={components:{},props:{article:{id:Number,title:String,createTime:String,category:String,tag:String,digest:String,url:String,img:String}},data(){return{ok:!1}},methods:{articleDeail(){this.$router.push({path:"/ArticleDetail/"+this.article.id})}},computed:{},watch:{},mounted(){this.article.img=this.baseUrl+this.article.img,this.article.tag=JSON.parse(this.article.tag),this.article.digest=this.article.digest.replace(/#*.*#/g,"").replace(/[^a-z0-9\u4e00-\u9fa5]/,"").substring(0,200),this.ok=!0}},m=e=>(Vue.pushScopeId("data-v-9ca90d4c"),e=e(),Vue.popScopeId(),e),v={class:"timebar"},f={class:"time_line"},N=m(()=>Vue.createElementVNode("div",{class:"time_node"},null,-1)),y={class:"time_info"},E={class:"article_card"},C={style:{"font-size":"80%"}},S={style:{color:"#d63a3a"}},k=m(()=>Vue.createElementVNode("hr",{width:"400px",align:"left"},null,-1));function w(e,c,t,s,o,a){const i=Vue.resolveComponent("el-col"),l=Vue.resolveComponent("el-image"),n=Vue.resolveComponent("el-row");return Vue.openBlock(),Vue.createBlock(Vue.Transition,{name:"el-zoom-in-top"},{default:Vue.withCtx(()=>[Vue.createVNode(n,null,{default:Vue.withCtx(()=>[Vue.createVNode(i,{class:"timebarCol"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",v,[Vue.createElementVNode("div",f,[N,Vue.createElementVNode("div",y,Vue.toDisplayString(t.article.createTime),1)])])]),_:1}),Vue.createVNode(i,{class:"articleCol"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.Transition,{name:"el-zoom-in-top"},{default:Vue.withCtx(()=>[Vue.withDirectives(Vue.createElementVNode("div",E,[Vue.createElementVNode("div",{class:Vue.normalizeClass({illustration_l:t.article.id%2==0,illustration_r:t.article.id%2!=0})},[Vue.createVNode(l,{class:"img",fir:"cover",src:t.article.img,alt:"img",onClick:a.articleDeail},null,8,["src","onClick"])],2),Vue.createElementVNode("div",{class:Vue.normalizeClass({content_r:t.article.id%2==0,content_l:t.article.id%2!=0})},[Vue.createElementVNode("h3",{onClick:c[0]||(c[0]=(...r)=>a.articleDeail&&a.articleDeail(...r))},Vue.toDisplayString(t.article.title),1),Vue.createElementVNode("span",C,[Vue.createTextVNode(" \u5206\u7C7B: "),Vue.createElementVNode("span",S,Vue.toDisplayString(t.article.category),1),Vue.createTextVNode(" | \u6807\u7B7E: "),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.article.tag.tags,(r,u)=>(Vue.openBlock(),Vue.createElementBlock("span",{style:{color:"#d63a3a"},key:u},Vue.toDisplayString(r)+"\xA0 ",1))),128))]),k,Vue.createElementVNode("p",null,Vue.toDisplayString(t.article.digest),1)],2)],512),[[Vue.vShow,o.ok]])]),_:1})]),_:1})]),_:1})]),_:1})}const D=V(p,[["render",w],["__scopeId","data-v-9ca90d4c"]]);const I={data(){return{}},computed:{author(){return this.$store.state.author}}},h=e=>(Vue.pushScopeId("data-v-ce9d6af4"),e=e(),Vue.popScopeId(),e),x={class:"authorStyle"},B={class:"author"},A={class:"author-name"},L={style:{"font-size":"90%",color:"#858585"}},T=h(()=>Vue.createElementVNode("div",null,[Vue.createElementVNode("span",{class:"tag1"},"\u6587\u7AE0"),Vue.createElementVNode("span",{class:"tag1"},"\u5206\u7C7B"),Vue.createElementVNode("span",{class:"tag1"},"\u8BBF\u95EE")],-1)),q={class:"tag",style:{color:"#6300ff"}},z={class:"tag",style:{color:"#6300ff"}},b={class:"tag",style:{color:"#6300ff"}},H=h(()=>Vue.createElementVNode("div",{class:"category"}," \u6587\u7AE0\u5206\u7C7B ",-1));function P(e,c,t,s,o,a){const i=Vue.resolveComponent("el-image");return Vue.openBlock(),Vue.createElementBlock("div",x,[Vue.createElementVNode("div",B,[Vue.createVNode(i,{class:"img",fit:"cover",src:a.author.img,alt:""},null,8,["src"]),Vue.createElementVNode("p",A,Vue.toDisplayString(a.author.blogName),1),Vue.createElementVNode("p",L,Vue.toDisplayString(a.author.blogInfo),1),T,Vue.createElementVNode("div",null,[Vue.createElementVNode("span",q,Vue.toDisplayString(a.author.articleNum),1),Vue.createElementVNode("span",z,Vue.toDisplayString(a.author.categoryNum),1),Vue.createElementVNode("span",b,Vue.toDisplayString(a.author.visitNum),1)])]),H])}const $=V(I,[["render",P],["__scopeId","data-v-ce9d6af4"]]);const U={name:"Home",props:["authorId"],components:{vArticleCard:D,vAuthorCard:$},data(){return{endmsg:"\u4E0B\u62C9\u52A0\u8F7D\u66F4\u591A",articleList:[],show:!1,ok:0,timeout:null,queryData:{authorId:"",startPage:0,pageSize:5},coverImg:""}},methods:{handleScroll(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{let e=document.documentElement.scrollTop,c=document.documentElement.clientHeight,t=document.documentElement.scrollHeight;c+e-t>-10&&(this.endmsg="\u6B63\u5728\u52A0\u8F7D...",d.get("init/getArticles",this.queryData).then(s=>{s.code==200&&(s.data.forEach(o=>{this.articleList.push(o)}),s.data.length<this.queryData.pageSize&&(this.endmsg="\u6CA1\u6709\u66F4\u591A\u4E86...",window.removeEventListener("scroll",this.handleScroll)),this.queryData.startPage=this.queryData.startPage+5)}))},100)}},computed:{isLogin:{set(e){this.$store.state.isLogin=e},get(){return this.$store.state.isLogin}}},watch:{},mounted(){console.log(),window.addEventListener("scroll",this.handleScroll),d.get("init/getAuthor",{authorId:this.authorId}).then(e=>{e.code==200&&(e.data.img=this.baseUrl+e.data.img,this.coverImg=this.baseUrl+e.data.coverImg,this.$store.commit("setAuthorInfo",e.data),this.ok++)}),this.queryData.authorId=this.authorId,d.get("init/getArticles",this.queryData).then(e=>{e.code==200&&(e.data.forEach(c=>{this.articleList.push(c)}),e.data.length<this.queryData.pageSize&&(this.endmsg="\u6CA1\u6709\u66F4\u591A\u4E86...",window.removeEventListener("scroll",this.handleScroll)),this.ok++,this.queryData.startPage=this.queryData.startPage+5)}),setTimeout(()=>{this.show=!0},200)},unmounted(){window.removeEventListener("scroll",this.handleScroll)}},F={class:"home-page"},J={class:"endmsg"};function O(e,c,t,s,o,a){const i=Vue.resolveComponent("el-image"),l=Vue.resolveComponent("el-col"),n=Vue.resolveComponent("vArticleCard"),r=Vue.resolveComponent("vAuthorCard"),u=Vue.resolveComponent("el-row");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",F,[Vue.createVNode(Vue.Transition,{name:"el-fade-in"},{default:Vue.withCtx(()=>[Vue.withDirectives(Vue.createVNode(i,{class:"img",fit:"cover",src:o.coverImg},null,8,["src"]),[[Vue.vShow,o.show]])]),_:1})]),o.ok>1?(Vue.openBlock(),Vue.createBlock(u,{key:0},{default:Vue.withCtx(()=>[Vue.createVNode(l,{class:"space"}),Vue.createVNode(l,{class:"ArticleCard"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(o.articleList,(_,g)=>(Vue.openBlock(),Vue.createElementBlock("div",{key:g,style:{transition:"all 0.5s"}},[Vue.createVNode(n,{article:_},null,8,["article"])]))),128))]),_:1}),Vue.createVNode(l,{class:"space"}),Vue.createVNode(l,{class:"AuthorCard"},{default:Vue.withCtx(()=>[o.ok>1?(Vue.openBlock(),Vue.createBlock(r,{key:0})):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(l,{class:"space"})]),_:1})):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",J,Vue.toDisplayString(o.endmsg),1)])}const K=V(U,[["render",O],["__scopeId","data-v-8a10dec7"]]);export{K as default};
